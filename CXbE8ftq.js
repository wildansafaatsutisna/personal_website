import{_ as ue}from"./Cxx0Qpy0.js";import{u}from"./CUDPsfN3.js";import"./DMjb6izT.js";import"./ZSX59CER.js";import{u as ne}from"./BImAHsqC.js";import{l as ie,v as n,r as i,n as m,a2 as de,M as re,ag as ve,c,a as h,A as w,I as k,t as d,q as r,a9 as ce,aa as fe,F as M,j as H,z as F,o as f,L as K,b as ge,w as pe,d as G}from"./G6z7ef1c.js";import"./KvolFuyQ.js";import"./i1dE8B0U.js";const me=["id"],he=["id","for","aria-live"],Te=["id","aria-live"],ye=["id"],be=["aria-controls"],Be={role:"group",class:"d-flex"},Ve=["id","disabled","value","type","placeholder","form","required"],_e=["disabled"],ke={"aria-live":"polite","aria-atomic":"true"},Ce={key:0,class:"d-block invalid-feedback"},Ae={key:1,class:"form-text text-muted"},Re={key:2,class:"form-text text-muted"},xe=["name","value"],Le=ie({__name:"BFormTags",props:{addButtonText:{default:"Add"},addButtonVariant:{default:"outline-secondary"},addOnChange:{type:[String,Boolean],default:!1},autofocus:{type:[String,Boolean],default:!1},disabled:{type:[String,Boolean],default:!1},duplicateTagText:{default:"Duplicate tag(s)"},inputAttrs:{},inputClass:{},inputId:{},inputType:{default:"text"},invalidTagText:{default:"Invalid tag(s)"},form:{},limit:{},limitTagsText:{default:"Tag limit reached"},modelValue:{default:()=>[]},name:{},noAddOnEnter:{type:[String,Boolean],default:!1},noOuterFocus:{type:[String,Boolean],default:!1},noTagRemove:{type:[String,Boolean],default:!1},placeholder:{default:"Add tag..."},removeOnDelete:{type:[String,Boolean],default:!1},required:{type:[String,Boolean],default:!1},separator:{},state:{type:[String,Boolean],default:void 0},size:{},tagClass:{},tagPills:{type:[String,Boolean],default:!1},tagRemoveLabel:{},tagRemovedLabel:{default:"Tag removed"},tagValidator:{type:Function,default:()=>!0},tagVariant:{default:"secondary"}},emits:["update:modelValue","input","tag-state","focus","focusin","focusout","blur"],setup(J,{emit:Q}){const a=J,v=Q,T=ne(),U=u(n(a,"addOnChange")),W=u(n(a,"autofocus")),g=u(n(a,"disabled")),X=u(n(a,"noAddOnEnter")),Y=u(n(a,"noOuterFocus")),Z=u(n(a,"noTagRemove")),ee=u(n(a,"removeOnDelete")),z=u(n(a,"required")),R=u(n(a,"state")),D=u(n(a,"tagPills")),b=i(null),C=m(()=>a.inputId||`${T.value}input__`),o=i(a.modelValue),l=i(""),B=i(!1),V=i(!1),L=i(""),P=i([]),x=i([]),O=i([]),ae=m(()=>({[`form-control-${a.size}`]:a.size!==void 0,disabled:g.value,focus:V.value,"is-invalid":R.value===!1,"is-valid":R.value===!0})),p=m(()=>o.value.includes(l.value)),S=m(()=>l.value===""?!1:!a.tagValidator(l.value)),I=m(()=>o.value.length===a.limit),q=m(()=>!S.value&&!p.value),te=m(()=>({addButtonText:a.addButtonText,addButtonVariant:a.addButtonVariant,addTag:_,disableAddButton:q.value,disabled:g.value,duplicateTagText:a.duplicateTagText,duplicateTags:O.value,form:a.form,inputAttrs:{...a.inputAttrs,disabled:g.value,form:a.form,id:C,value:l},inputHandlers:{input:$,keydown:j,change:N},inputId:C,inputType:a.inputType,invalidTagText:a.invalidTagText,invalidTags:x.value,isDuplicate:p.value,isInvalid:S.value,isLimitReached:I.value,limitTagsText:a.limitTagsText,limit:a.limit,noTagRemove:Z.value,placeholder:a.placeholder,removeTag:A,required:z.value,separator:a.separator,size:a.size,state:R.value,tagClass:a.tagClass,tagPills:D.value,tagRemoveLabel:a.tagRemoveLabel,tagVariant:a.tagVariant,tags:o.value}));de(()=>a.modelValue,e=>{o.value=e});const E=()=>{var e;W.value&&((e=b.value)==null||e.focus())},le=e=>{if(g.value){e.target.blur();return}v("focusin",e)},oe=e=>{g.value||Y.value||(V.value=!0,v("focus",e))},se=e=>{V.value=!1,v("blur",e)},$=e=>{var s,y;const t=typeof e=="string"?e:e.target.value;if(B.value=!1,(s=a.separator)!=null&&s.includes(t.charAt(0))&&t.length>0){b.value&&(b.value.value="");return}if(l.value=t,(y=a.separator)!=null&&y.includes(t.charAt(t.length-1))){_(t.slice(0,t.length-1));return}P.value=a.tagValidator(t)&&!p.value?[t]:[],x.value=a.tagValidator(t)?[]:[t],O.value=p.value?[t]:[],v("tag-state",P.value,x.value,O.value)},N=e=>{U.value&&($(e),p.value||_(l.value))},j=e=>{if(e.key==="Enter"&&!X.value){_(l.value);return}(e.key==="Backspace"||e.key==="Delete")&&ee.value&&l.value===""&&B.value&&o.value.length>0?A(o.value[o.value.length-1]):B.value=!0},_=e=>{var s;if(e=(e||l.value).trim(),e===""||p.value||!a.tagValidator(e)||a.limit&&I.value)return;const t=[...a.modelValue,e];l.value="",B.value=!0,v("update:modelValue",t),v("input",t),(s=b.value)==null||s.focus()},A=e=>{const t=o.value.indexOf((e==null?void 0:e.toString())??"");L.value=o.value.splice(t,1).toString(),v("update:modelValue",o.value)};return re(()=>{E(),a.modelValue.length>0&&(B.value=!0)}),ve(()=>E()),(e,t)=>(f(),c("div",{id:r(T),class:F(["b-form-tags form-control h-auto",ae.value]),role:"group",tabindex:"-1",onFocusin:le,onFocusout:t[1]||(t[1]=s=>v("focusout",s))},[h("output",{id:`${r(T)}selected_tags__`,class:"visually-hidden",role:"status",for:C.value,"aria-live":V.value?"polite":"off","aria-atomic":"true","aria-relevant":"additions text"},d(o.value.join(", ")),9,he),h("div",{id:`${r(T)}removed_tags__`,role:"status","aria-live":V.value?"assertive":"off","aria-atomic":"true",class:"visually-hidden"}," ("+d(e.tagRemovedLabel)+") "+d(L.value),9,Te),w(e.$slots,"default",ce(fe(te.value)),()=>[h("ul",{id:`${r(T)}tag_list__`,class:"b-form-tags-list list-unstyled mb-0 d-flex flex-wrap align-items-center"},[(f(!0),c(M,null,H(o.value,(s,y)=>w(e.$slots,"tag",K({key:y,ref_for:!0},{tag:s,tagClass:e.tagClass,tagVariant:e.tagVariant,tagPills:r(D),removeTag:A}),()=>[ge(ue,{class:F(e.tagClass),tag:"li",variant:e.tagVariant,pill:e.tagPills,onRemove:A},{default:pe(()=>[G(d(s),1)]),_:2},1032,["class","variant","pill"])])),128)),h("li",{role:"none","aria-live":"off",class:"b-from-tags-field flex-grow-1","aria-controls":`${r(T)}tag_list__`},[h("div",Be,[h("input",K({id:C.value,ref_key:"input",ref:b,disabled:r(g),value:l.value,type:e.inputType,placeholder:e.placeholder,class:"b-form-tags-input w-100 flex-grow-1 p-0 m-0 bg-transparent border-0",style:{outline:"currentcolor none 0px","min-width":"5rem"}},e.inputAttrs,{form:e.form,required:r(z),onInput:$,onChange:N,onKeydown:j,onFocus:oe,onBlur:se}),null,16,Ve),q.value?(f(),c("button",{key:0,type:"button",class:F(["btn b-form-tags-button py-0",[`btn-${e.addButtonVariant}`,{"disabled invisible":l.value.length===0},e.inputClass]]),style:{"font-size":"90%"},disabled:r(g)||l.value.length===0||I.value,onClick:t[0]||(t[0]=s=>_(l.value))},[w(e.$slots,"add-button-text",{},()=>[G(d(e.addButtonText),1)])],10,_e)):k("",!0)])],8,be)],8,ye),h("div",ke,[S.value?(f(),c("div",Ce,d(e.invalidTagText)+": "+d(l.value),1)):k("",!0),p.value?(f(),c("small",Ae,d(e.duplicateTagText)+": "+d(l.value),1)):k("",!0),o.value.length===e.limit?(f(),c("small",Re,"Tag limit reached")):k("",!0)])]),e.name?(f(!0),c(M,{key:0},H(o.value,(s,y)=>(f(),c("input",{key:y,type:"hidden",name:e.name,value:s},null,8,xe))),128)):k("",!0)],42,me))}});export{Le as default};

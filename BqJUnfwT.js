import{t as O,a as E}from"./h1AccBNZ.js";import{t as Ee,l as Se,m as H,H as we,n as m}from"./ZSX59CER.js";import{n as De}from"./yvJ37jK8.js";import{l as _e,r as G,n,S as d}from"./G6z7ef1c.js";const j=["ar","az","ckb","fa","he","ks","lrc","mzn","ps","sd","te","ug","ur","yi"].map(e=>e.toLowerCase()),Ae=e=>{const r=Ee(e).toLowerCase().replace(Se,"").split("-"),i=r.slice(0,2).join("-"),c=r[0];return j.includes(i)||j.includes(c)},Le=e=>we?H(e)?e:{capture:!!e||!1}:!!(H(e)?e.capture:e),Te=(e,r,i,c)=>{e&&e.addEventListener&&e.addEventListener(r,i,Le(c))},xe=(e,r,i,c)=>{e&&e.removeEventListener&&e.removeEventListener(r,i,c)},W=(e,r)=>{(e?Te:xe)(...r)},S=(e,{preventDefault:r=!0,propagation:i=!0,immediatePropagation:c=!1}={})=>{r&&e.preventDefault(),i&&e.stopPropagation(),c&&e.stopImmediatePropagation()},P="ArrowDown",le="End",ne="Home",oe="PageDown",ue="PageUp",N="ArrowUp",X=1,Y=100,J=1,Q=500,Z=100,ee=10,te=4,ae=[N,P,ne,le,ue,oe],Oe=_e({props:{ariaControls:{type:String,required:!1},ariaLabel:{type:String,required:!1},labelIncrement:{type:String,default:"Increment"},labelDecrement:{type:String,default:"Decrement"},modelValue:{type:Number,default:null},name:{type:String,default:"BFormSpinbutton"},disabled:{type:[Boolean,String],default:!1},placeholder:{type:String,required:!1},locale:{type:String,default:"locale"},form:{type:String,required:!1},inline:{type:Boolean,default:!1},size:{type:String,required:!1},formatterFn:{type:Function},readonly:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},repeatDelay:{type:[String,Number],default:Q},repeatInterval:{type:[String,Number],default:Z},repeatStepMultiplier:{type:[String,Number],default:te},repeatThreshold:{type:[String,Number],default:ee},required:{type:[Boolean,String],default:!1},step:{type:[String,Number],default:J},min:{type:[String,Number],default:X},max:{type:[String,Number],default:Y},wrap:{type:Boolean,default:!1},state:{type:[Boolean,String],default:null}},emits:["update:modelValue","change"],setup(e,{emit:r}){const i=G(!1),c=n(()=>1),C=()=>{r("change",o.value)},w=G(null),o=n({get(){return m(e.modelValue)?w.value:e.modelValue},set(t){m(e.modelValue)?w.value=t:r("update:modelValue",t)}});let D,_,A=!1;const L=n(()=>O(e.step,J)),v=n(()=>O(e.min,X)),b=n(()=>{const t=O(e.max,Y),a=L.value,l=v.value;return Math.floor((t-l)/a)*a+l}),re=n(()=>{const t=E(e.repeatDelay,0);return t>0?t:Q}),ie=n(()=>{const t=E(e.repeatInterval,0);return t>0?t:Z}),se=n(()=>Math.max(E(e.repeatThreshold,ee),1)),T=n(()=>Math.max(E(e.repeatStepMultiplier,te),1)),x=n(()=>{const t=L.value;return Math.floor(t)===t?0:(t.toString().split(".")[1]||"").length}),ce=n(()=>Math.pow(10,x.value||0)),de=n(()=>{const{value:t}=o;return t===null?"":t.toFixed(x.value)}),F=n(()=>{const t=[e.locale];return new Intl.NumberFormat(t).resolvedOptions().locale}),me=n(()=>Ae(F.value)),fe=()=>{const t=x.value;return new Intl.NumberFormat(F.value,{style:"decimal",useGrouping:!1,minimumIntegerDigits:1,minimumFractionDigits:t,maximumFractionDigits:t,notation:"standard"}).format},R=n(()=>e.formatterFn?e.formatterFn:fe()),ve=n(()=>({role:"group",lang:F.value,tabindex:e.disabled?null:"-1",title:e.ariaLabel})),U=n(()=>!m(e.modelValue)||!m(w.value)),ye=n(()=>({dir:me.value,spinId:c.value,tabindex:e.disabled?null:"0",role:"spinbutton","aria-live":"off","aria-label":e.ariaLabel||null,"aria-controls":e.ariaControls||null,"aria-invalid":e.state===!1||!U.value&&e.required?"true":null,"aria-required":e.required?"true":null,"aria-valuemin":v.value,"aria-valuemax":b.value,"aria-valuenow":m(o.value)?null:o.value,"aria-valuetext":m(o.value)?null:R.value(o.value)})),V=t=>{let{value:a}=o;if(!e.disabled&&!m(a)){const l=L.value*t,u=v.value,s=b.value,f=ce.value,{wrap:y}=e;a=Math.round((a-u)/l)*l+u+l,a=Math.round(a*f)/f,o.value=a>s?y?u:s:a<u?y?s:u:a}},M=(t=1)=>{m(o.value)?o.value=v.value:V(1*t)},I=(t=1)=>{m(o.value)?o.value=e.wrap?b.value:v.value:V(-1*t)},be=t=>{const{code:a,altKey:l,ctrlKey:u,metaKey:s}=t;if(!(e.disabled||e.readonly||l||u||s)&&ae.includes(a)){if(S(t,{propagation:!1}),A)return;h(),[N,P].includes(a)?(A=!0,a===N?p(t,M):a===P&&p(t,I)):a===ue?M(T.value):a===oe?I(T.value):a===ne?o.value=v.value:a===le&&(o.value=b.value)}},he=t=>{const{code:a,altKey:l,ctrlKey:u,metaKey:s}=t;e.disabled||e.readonly||l||u||s||ae.includes(a)&&(S(t,{propagation:!1}),h(),A=!1,C())},p=(t,a)=>{const{type:l}=t||{};if(!e.disabled&&!e.readonly){if(B(t)&&l==="mousedown"&&t.button)return;h(),a(1);const u=se.value,s=T.value,f=re.value,y=ie.value;D=setTimeout(()=>{let g=0;_=setInterval(()=>{a(g<u?1:s),g++},y)},f)}};function B(t){return t.type==="mouseup"||t.type==="mousedown"}const k=t=>{B(t)&&t.type==="mouseup"&&t.button||(S(t,{propagation:!1}),h(),q(!1),C())},q=t=>{try{W(t,[document.body,"mouseup",k,!1]),W(t,[document.body,"touchend",k,!1])}catch{return 0}},h=()=>{clearTimeout(D),clearInterval(_),D=void 0,_=void 0},K=(t,a,l,u,s,f,y)=>{const g=d(l,{props:{scale:i.value?1.5:1.25},attrs:{"aria-hidden":"true"}}),ge={hasFocus:i.value},$=z=>{!e.disabled&&!e.readonly&&(S(z,{propagation:!1}),q(!0),p(z,t))};return d("button",{class:[{"py-0":!e.vertical},"btn","btn-sm","border-0","rounded-0"],tabindex:"-1",type:"button",disabled:e.disabled||e.readonly||f,"aria-disabled":e.disabled||e.readonly||f?"true":null,"aria-controls":c.value,"aria-label":a||null,"aria-keyshortcuts":s||null,onmousedown:$,ontouchstart:$},[De(y,ge)||g])};return()=>{const t=K(M,e.labelIncrement,d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-plus",viewBox:"0 0 16 16"},d("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})),"inc","ArrowUp",!1,"increment"),a=K(I,e.labelDecrement,d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-dash",viewBox:"0 0 16 16"},d("path",{d:"M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z"})),"dec","ArrowDown",!1,"decrement"),l=[];e.name&&!e.disabled&&l.push(d("input",{type:"hidden",name:e.name,form:e.form||null,value:de.value,key:"hidden"}));const u=d("output",{class:[{"d-flex":e.vertical},{"align-self-center":!e.vertical},{"align-items-center":e.vertical},{"border-top":e.vertical},{"border-bottom":e.vertical},{"border-start":!e.vertical},{"border-end":!e.vertical},"flex-grow-1"],...ye.value,key:"output"},[d("bdi",U.value?R.value(o.value):e.placeholder||"")]);return d("div",{class:["b-form-spinbutton form-control",{disabled:e.disabled},{readonly:e.readonly},{focus:i},{"d-inline-flex":e.inline||e.vertical},{"d-flex":!e.inline&&!e.vertical},{"align-items-stretch":!e.vertical},{"flex-column":e.vertical},e.size?`form-control-${e.size}`:null],...ve.value,onkeydown:be,onkeyup:he},e.vertical?[t,l,u,a]:[a,l,u,t])}}});export{Oe as default};
